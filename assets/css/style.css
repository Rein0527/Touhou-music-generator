/* assets/css/style.css */
/* 簡化版樣式：背景交錯淡入、底部控制列、抽屜與浮窗 */

:root{
  --bg: #0b0d12;
  --fg: #f8f9fb;
  --muted: #9aa3b2;
  --accent: #8ab4ff;
}

*{ box-sizing: border-box; }
html,body{ height:100%; margin:0; }
body{ background: var(--bg); color: var(--fg); font-family: ui-sans-serif, system-ui, -apple-system, "Microsoft JhengHei", "Noto Sans TC", sans-serif; }

.app{ position:relative; min-height:100vh; overflow:hidden; }

/* 背景與淡入 */
.bg, .bg-next{
  position:absolute; inset:0;
  background-position:center center;
  background-repeat:no-repeat;
  background-size:cover;
  opacity:0; transition: opacity .6s ease;
  filter: saturate(1.05) brightness(.9);
}
.bg.show{ opacity:1; }
.bg-next.show{ opacity:1; }
.bg-dim{ position:absolute; inset:0; background: radial-gradient(transparent, rgba(0,0,0,.45)); pointer-events:none; }

/* 舞台 */
.stage{ position:relative; display:flex; align-items:center; justify-content:center; padding-top:24px; padding-bottom:160px; }
#viz{ width: min(100vw, 100vh); height: min(100vw, 100vh); max-width: 1200px; max-height: 1200px; }

/* Now playing */
.nowplaying{ position:absolute; left:0; right:0; bottom: 110px; padding: 0 20px; }
.nowplaying .title{ text-align:center; font-size:20px; font-weight:700; text-shadow: 0 2px 6px rgba(0,0,0,.5); }
.scrub{ display:flex; align-items:center; gap:12px; max-width:800px; margin:10px auto 0; }
.time{ width:60px; text-align:center; color: var(--muted); }
.bar-outer{ flex:1; height:8px; background: rgba(255,255,255,.15); border-radius:999px; cursor:pointer; }
.bar-inner{ height:100%; width:0%; background: linear-gradient(90deg, #a6c0fe, #f68084); border-radius:999px; }

/* 底部控制列 */
.bar{ position:fixed; left:0; right:0; bottom:0; height:72px; display:flex; align-items:center; justify-content:space-between; padding:0 12px; background: rgba(8,10,18,.6); backdrop-filter: blur(10px); border-top:1px solid rgba(255,255,255,.08); }
.btn{ appearance:none; border:0; background: rgba(255,255,255,.12); color:#fff; padding:10px 14px; border-radius:12px; cursor:pointer; }
.btn.icon{ font-size:18px; width:44px; height:44px; display:grid; place-items:center; }
.btn.icon.sm{ width:32px; height:32px; }
.btn.ghost{ background: transparent; border:1px solid rgba(255,255,255,.2); }

.vol{ display:flex; align-items:center; gap:8px; }
.vol input[type=range]{ width:120px; }

/* 播放清單抽屜 */
.playlist-panel{
  position:fixed; top:0; bottom:0; left:0; width: 320px; transform: translateX(-100%);
  transition: transform .3s ease; background: rgba(10,12,18,.86); backdrop-filter: blur(10px);
  border-right:1px solid rgba(255,255,255,.08); padding: 12px;
}
.playlist-panel.open{ transform: translateX(0); }
.playlist-header{ display:flex; align-items:center; justify-content:space-between; }
#playlistItems{ list-style:none; margin:12px 0 0; padding:0; max-height: calc(100vh - 120px); overflow:auto; }
.pl-item{ margin:6px 0; }
.pl-item.active{ outline:2px solid var(--accent); border-radius:12px; }
.pl-btn{ width:100%; text-align:left; padding:10px 12px; border-radius:10px; border:0; background: rgba(255,255,255,.06); color:#fff; }
.pl-title{ display:block; font-weight:700; }
.pl-artist{ display:block; font-size:12px; color: var(--muted); }

/* 設定浮窗 */
.settings-flyout{
  position:fixed; right:12px; bottom:88px; width:320px; max-width:calc(100vw - 24px);
  background: rgba(10,12,18,.86); backdrop-filter: blur(10px);
  border:1px solid rgba(255,255,255,.08); border-radius:14px; padding: 10px 12px;
  transform: translateY(20px); opacity:0; pointer-events:none; transition: .2s ease;
}
.settings-flyout.open{ transform: translateY(0); opacity:1; pointer-events:auto; }
.settings-header{ display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
.settings-body .row{ display:flex; align-items:center; justify-content:space-between; margin:8px 0; }
.settings-body .sub{ color: var(--muted); font-size:12px; }
.settings-body .input{ min-width: 160px; }

.switch{ position:relative; display:inline-block; width:44px; height:24px; }
.switch input{ display:none; }
.switch .slider{ position:absolute; inset:0; background:#777; border-radius:999px; transition:.2s; }
.switch .slider:before{
  content:""; position:absolute; left:3px; top:3px; width:18px; height:18px; background:#fff; border-radius:50%; transition:.2s;
}
.switch input:checked + .slider{ background:#4caf50; }
.switch input:checked + .slider:before{ transform: translateX(20px); }

/* 手機優化 */
@media (max-width: 600px){
  #viz{ width: 100vw; height: 100vw; }
  .nowplaying{ bottom: 120px; }
  .vol input[type=range]{ width: 90px; }
}
