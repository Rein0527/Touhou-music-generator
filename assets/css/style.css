/* 背景與舞台 */
html, body { height:100%; margin:0; background:#0b0d12; color:#fff;
  font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans TC","Microsoft JhengHei",Arial; }
.app{ position:relative; min-height:100%; overflow:hidden; }
.bg,.bg-next{ position:absolute; inset:0; background-position:center; background-size:cover;
  filter:blur(8px) saturate(1.05) brightness(0.74); transform:scale(1.03); transition:opacity .8s ease; }
.bg{opacity:1}.bg-next{opacity:0}
.bg-dim{ position:absolute; inset:0; background:radial-gradient(ellipse at center,rgba(0,0,0,.2),rgba(0,0,0,.62) 58%,rgba(0,0,0,.82)); }
.stage{ position:relative; z-index:5; display:grid; place-items:center; min-height:72vh; padding-top:5vh; }
canvas{ width:min(78vmin,1040px); height:min(78vmin,1040px); aspect-ratio:1/1; touch-action:none; }

/* 播放清單（左側） */
.playlist-panel{ position:fixed; top:0; left:-340px; width:340px; height:100%;
  background:rgba(20,20,20,.85); backdrop-filter:blur(10px); transition:left .3s ease; z-index:30; display:flex; flex-direction:column; }
.playlist-panel.open{ left:0; }
.playlist-header{ display:flex; justify-content:space-between; align-items:center; padding:12px; border-bottom:1px solid rgba(255,255,255,.15); }
#playlistItems{ list-style:none; margin:0; padding:0; overflow-y:auto; flex:1; }
#playlistItems li{ padding:10px 14px; cursor:pointer; border-bottom:1px solid rgba(255,255,255,.08); color:#ddd; }
#playlistItems li:hover{ background:rgba(255,255,255,.12); color:#fff; }
#playlistItems li.active{ background:rgba(187,113,243,.25); color:#fff; }

/* 設定（右側） */
.settings-panel{ position:fixed; top:0; right:-300px; width:300px; height:100%;
  background:rgba(30,30,30,.9); backdrop-filter:blur(10px); transition:right .3s ease; z-index:30; padding:12px; }
.settings-panel.open{ right:0; }
.settings-header{ display:flex; justify-content:space-between; align-items:center; padding-bottom:10px; border-bottom:1px solid rgba(255,255,255,.15);}
.settings-panel ul{ list-style:none; margin:0; padding:10px 0;}
.settings-panel li{ display:flex; justify-content:space-between; align-items:center; padding:10px 0; border-bottom:1px solid rgba(255,255,255,.1); }

/* toggle switch */
.switch{ position:relative; display:inline-block; width:46px; height:24px; }
.switch input{ display:none; }
.slider{ position:absolute; cursor:pointer; inset:0; background:#777; transition:.3s; border-radius:24px; }
.slider:before{ content:""; position:absolute; height:18px; width:18px; left:3px; bottom:3px; background:#fff; transition:.3s; border-radius:50%; }
input:checked + .slider{ background:#4caf50; }
input:checked + .slider:before{ transform:translateX(22px); }

/* 底部控制列 */
.bar{ position:fixed; left:0; right:0; bottom:0; z-index:20; display:grid; grid-template-columns:1fr auto 1fr;
  align-items:center; padding:10px 20px; backdrop-filter:blur(12px) saturate(1.2); background:rgba(255,255,255,.08);
  border-top:1px solid rgba(255,255,255,.15); }
.bar-left{ display:flex; align-items:center; justify-content:flex-start; }
.bar-center{ display:flex; justify-content:center; align-items:center; gap:40px; }
.btn{ appearance:none; border:none; color:#fff; background:linear-gradient(180deg,rgba(33,41,54,.65),rgba(18,23,33,.65));
  border-radius:14px; cursor:pointer; user-select:none; transition:all .2s ease; }
.btn.icon{ width:60px; height:60px; border-radius:50%; font-size:26px; }
.btn.icon:hover{ background:rgba(255,255,255,.25); transform:translateY(-2px); }
.btn.icon:active{ transform:translateY(2px) scale(.95); background:rgba(255,255,255,.3); }

/* 右側音量 */
.bar-right{ display:flex; justify-content:flex-end; align-items:center; gap:12px; }
.vol{ display:flex; align-items:center; gap:6px; }
.vol input{ width:120px; }
